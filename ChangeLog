2005-04-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.3.1
	* NEWS : Updated
	* autogen.sh : Changed the package name to evolution-exchange

2005-04-22  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.[ch] (requires_relogin): Check for
	the change in auth type, only if it is set. 
	
2005-04-22  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.[ch] (add_esources): Removed.
	(add_account_esources): Added new to create e-sources for all the
	folders.
	(add_folder_esource): Added new to create e-source for a given folder.
	(add_sources): Creating a list which contains folder name, uri and type
	for all the folders, which is used in add_account_sources(). Moved 
	finding the source list and list_sync() in add_account_esources() 
	instead of add_sources().
	(remove_esource): Removed.
	(remove_account_esources): Added new to remove e-sources for all the 
	folders.
	(remove_account_esource): Added new to remove e-sources for all folders
	of given type.
	(remove_folder_esource): Added new, to remove e-source for a specified 
	folder. 
	(requires_relogin): Checking for auth-mechanism and SSL.	
	(account_changed): Calling remove_account_esources().
	
	* storage/e-folder-exchange.c (e_folder_exchange_delete): Calling 
	remove_folder_esource().
	(e_folder_exchange_new): Calling add_folder_esource().
	
	* storage/exchange-hierarchy-gal.c (exchange_hierarchy_gal_new): 
	Similar. 

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Similar.

	* storage/exchange-hierarchy-favorites.c (remove_folder): Similar.

	* storage/exchange-hierarchy-foreign.c (remove_folder): Similar.
	(exchange_hierarchy_foreign_add_folder): Similar.

2005-04-21  Sushma Rai  <rsushma@novell.com>

	* configure.in: Using libsoup-2.2 instead of libsoup-2.4

	* storage/GNOME_Evolution_Exchange_Storage.server.in.in: Changed the 
	book and cal factory versions to 1.4

2005-04-12  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.3.0

2005-04-06  Vivek Jain  <jvivek@novell.com>

	**Fixes #74218
	* calendar/e-cal-backend-exchange-calendar.c
	(modify_object_with_href):dup the string before assigning the 
	value returned by icaltimezone_get_tzid. 

2005-04-05  Ahmad Riza H Nst  <ari@160c.afraid.org>

	* configure.in: Added id (Indonesian) to ALL_LINGUAS line.


2005-04-05  Vivek Jain  <jvivek@novell.com>

       **Fixes #42376
       * storage/exchange-account.c :
       (exchange_account_remove_folder):
       (exchange_account_xfer_folder): check whether the folder being
       renamed/moved/removed is a standard one. throw error as an
       unsupported operation.

2005-04-05  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-04-01  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #74227
	* calendar/e-cal-backend-exchange-calendar.c
       	(remove_object): Removed the check for the presence of object 
	and assign proper values to old_object and object.
	(receive_objects), (book_resource): Do not send NULL for the 
	last argument in remove_object.
	
2005-04-01  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  Sushma Rai  <rsushma@novell.com>

	Patch by Sarfraaz Ahmed for a exchange-storage crash while exiting 
	Evolution. 
	* storage/exchange-account.c (exchange_account_set_online): Not setting 
	"account_online" flag, as it gets initialized in 
	exchange_account_connect().

	* storage/exchange-hierarchy-somedav.c (scan_subtree): Using the 
	offline mode parameter for the function, instead of reading it again.

	* storage/exchange-offline-listener.c (setup_offline_listener): Reading
	the connection id returned for online/offline status change.
	(exchange_offline_listener_dispose): Using the connection ID returned 
	by gconf_client_notify_add() while removing the notification.

2005-03-31  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_connect): Setting is_writable flag of 
	EBookBackendExchangePrivate based on user's access permissions. Also
	notifying the writable state.
	(e_book_backend_exchange_load_source): In case of offline mode, setting
	the writable state of FALSE. Calling the update_cache() after 
	e_book_backend_exchange_connect() so that is_writable flag is set 
	according to the user's access rights.
	(e_book_backend_exchange_set_mode): In case of offline mode, marking 
	the addressbook as not writable. In online mode, Setting writable and 
	notifying writable state based on users access permissions.

2005-03-31  Chenthill Palanisamy  <pchenthill@novell.com>

	Fixes #73969
	* calendar/e-cal-backend-exchange-calendar.c: (receive_objects): If the 
	rid is not present and the method is CANCEL remove the recurrence event
       	completely.

2005-03-29  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-folder-size.[ch] (free_fsize_table): Freeing the key
	and returning boolean.
	(free_row_refs): Added new. Frees row reference.
	(finalize): Freeing hash tables and private structure.
	(init): Creating the hash table, using g_hash_table_new()
	(exchange_folder_size_update): strdup of the key, before inserting into
	the hash table.
	(exchange_folder_size_remove): Added new. Removes the specifed folder
	entry from the hash table and updates GtkListStore.
	(exchange_folder_size_get): Added new. Returns the folder size of
	specified folder from the cache.

	* storage/exchange-hierarchy-webdav.c (e_folder_webdav_new): For the
	folders without internal uri (newly created folder), creating the
	internal uri with trailing slash.
	(create_folder): Updating folder size for newly created folder.
	(remove_folder): Removing folder size entry for the folder removed.
	(xfer_folder): Finding whether the folder is renamed or moved. In case
	of folder rename, removing the old entry from hash table and updating
	the hash table with new folder name.
	(rescan): Finding the folder size for all type for folders and not only
	the personal folders. Also, considering only the personal folder sizes
	for finding the total mail box size.
	(exchange_hierarchy_webdav_parse_folder): Removed the folder size check
	done here, now doing it in scan_subtree().
	(scan_subtree): Finding the folder size and mail box size.
	Fixes #73494 and #72100.

2005-03-29  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-autoconfig.c (validate): If the OWA url entered has wrong
	protocol during account creation, displaying error message instead
	of correcting the url and proceeding with the account creation. 
	Fixes #74050. 
	Also, prefixing the owa path with the slash. See #73627. 

	* camel/camel-exchange-provider.c (exchange_validate_user_cb): Freeing
	mailbox parameter, after setting the value to camel url.

2005-03-29  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (add_esource): Fixed the problem
	where e-source was being accessed after the unref. Also Selecting
	calendar and tasks folders only if e-source is created. 
	Should fix #74029

2005-03-17  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c (exchange_validate_user_cb): Setting
	the authentication mechanism parameter in camel url.
	
	* lib/e2k-autoconfig.c (get_ctx_auth_handler): Initializing saw_ntlm
	and saw_basic flags and setting saw ntlm if the response header begins
	with "NTLM ".
	(validate): Setting the is_ntlm flag if the user is authenticated.	

2005-03-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* docs/reference/Makefile.am : Link to krb5 libs as well
	* storage/Makefile.am : Similar
	Fixes a build break on SuSE machines.

2005-03-16  Jeffrey Stedfast  <fejj@novell.com>

	* camel/camel-exchange-folder.c (camel_exchange_folder_construct):
	Set the state file path and load it. Fixes bug #73498.
	(transfer_messages_to): Updated to use journal_append()
	(refresh_info): Replay the journal here. Fixes bug #72968.
	
	* camel/camel-exchange-journal.c (exchange_entry_play_transfer):
	Removed (not used).
	(camel_exchange_journal_transfer): Removed.
	(exchange_entry_play_append): restore back the message info from the
	journal cache to the real cache.

2005-03-16  Sarfraaz Ahmed <asarfraaz@novell.com>

        * camel/camel-exchange-store.c (construct): Move back the stub creation
        code to exchange_connect and invoke connect to fix the timing issue.
        (exchange_connect) : Create a stub if it already not created.
        (exchange_get_folder) (exchange_get_trash) (exchange_get_folder_info) :
        Check if stub is created, if not then create it.
        Fixes #73673

2005-03-15 Sivaiah Nallagatla <snallagatla@novell.com>
                                                                                
        * addressbook/e-book-backend-exchange.c
        (e_book_backend_exchange_create_contact)
        (e_book_backend_exchange_modify_contact)
        (e_book_backend_exchange_remove_contacts) :
        Make sure new or modified objects are added
        to cache and deleted ones are actually deleted
        from cache.
        Fixes #73712

2005-03-15  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c (exchange_validate_user_cb): Using
	ExchangeParams structure to store the parameters values to read from
	server during user validation, and adding them to camel url.

	* lib/e2k-autoconfig.c (e2k_validate_user): Using ExchangeParams.
	(validate): If the user is validated finding "mailbox" and "owa_path"
	values. Using ExchangeParams for returning the values.

	* lib/e2k-validate.h: Defined ExchangeParams.

2005-03-15  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c (open_calendar): Return proper
	error message when authentication fails. This happens when we start
	evolution in calendar view without remembering the password.

2005-03-15  Sushma Rai  <rsushma@novell.com>

	* shell/e-folder-misc-dialogs.c (do_foreign_folder_dialog): Fixed the
	way e-mail ids were being read from the user name entry.

2005-03-14  Sivaiah Nallagatla <snallagatla@novell.com>

       * addresbook/e-book-backend-excahnge.c
       (e_book_backend_exchange_create_contact)
       (e_book_backend_exchange_modify_contact)
       (e_book_backend_exchange_remove_contacts)
       (e_book_backend_exchange_get_changes)
       (e_book_backend_exchange_get_contact) : added misc. stuff
       like returning proper error code, assigning
       NULL to out params and not using e_data_book_view etc
       to offline case error handling
       Don't know if it fixes any bug in bugzilla


2005-03-11  Sarfraaz Ahmed <asarfraaz@novell.com>

        * calendar/e-cal-backend-exchange-calendar.c (add_ical) : Make sure we
        check for attachments in subcomponents of a vcalendar as well.
        (get_attachment) : Moved to e-cal-backend-exchange.c
        (build_msg) : Moved to e-cal-backend-exchange.c
        (create_object) : Minor leak fixed.
        (modify_object_with_href) : Dont loose the attachments while modifying.
        * calendar/e-cal-backend-exchange-tasks.c (put_body): Handle attachments
        (get_changed_tasks) : Check for attachments and fetch them from server.
        (create_task_object) : Check for attachments and send them to server.
        (modify_task_object) : Similar
        * calendar/e-cal-backend-exchange.c (load_cache) : Create the local
        attachment store for the GUI to store exchange attachments
        (save_attach_file) : Make a local copy of the attachment in the backend
        (get_attachment) : Extract the attachment from the server object.(Moved
        from calendar.c)
        (get_attach_file_contents) : Store the attachment in a file.
        (build_msg) : Build the mime part to send to the server (Moved from
        calendar.c)
        * calendar/e-cal-backend-exchange.h : Export the attachment utility
        functions.

2005-03-11  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c (func_match): Handling the
	query which beginswith full name or email id without any value.
	Fixes the problem of listing items of Exchange personal contacts
	from user selection dialog.

2005-03-11  Sushma Rai  <rsushma@novell.com>
	
	* storage/exchange-account.c (is_password_expired)
	(exchange_account_set_password): If kerberos calls with windows domain
	and domain extracted from e-mail id fail, trying again with NT domain.
	(exchange_account_connect): Storing the NT domain value in exchange
	account.
	(init): Initializing NT domain paramenter.
	(finalize): Clearing NT domain value stored.
	Fixes #72801

2005-03-11 Sivaiah Nallagatla <snallagatla@novell.com>
                                                                                           
        * calendar/e-cal-backend-exchange-calendar.c
        (add_timezone_cb) (modify_object_with_href) :
        initialize the izone to NULL before passing it
        to get_timzone.
                                                                                           
        Fixes #73505, #67740  and surely something else

2005-03-07  Jeffrey Stedfast  <fejj@novell.com>

	Fixes bug #72889, #72943 and probably others.

	* camel/camel-exchange-store.c (exchange_disconnect): Removed the
	logic, put it into finalize() instead. Simply return TRUE here.
	(exchange_connect): Moved the logic into construct().
	(construct): Init the strub and connect it. This needs to happen
	here or offline mode breaks.

2005-03-10 Sivaiah Nallagatla <snallagatla@novell.com>

	* calendar/backends/e-cal-backend-exchange.c
	(remove_objects) : Make sure object is non NULL before deferencing
	it.  Fixes #73059

2005-03-10  Sushma Rai  <rsushma@novell.com>

	* calendar/e-cal-backend-exchange-tasks.c (create_task_object):
	Finding the UID from the ical component and using it while checking
	the cache, and also returning the UID back. Fixes #72041
	Changed the parameter name from comp_uid to return_uid.

	* calendar/e-cal-backend-exchange-calendar.c (create_object): Similar
	to tasks, here also reading the UID value from ical component and 
	returning it back.

2005-03-09 Sivaiah Nallagatla <snallagatla@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_get_contact_list) : 
	Don't free the vcard you just added to list !!!
	That gets freed elsewhere.
	Fixes #73470, #73030 #73025 and may be something 
	else which i don't know

2005-03-09 Sivaiah Nallagatla <snallagatla@novell.com>

        * addresbook/e-book-backend-exchange.c
        (build_message) : make sure note is non NULL
        before processing. Basically added robustness against
        ote being NULL.
        Fixes #72044

2005-03-09  Sushma Rai  <rsushma@novell.com>
	
	* storage/exchange-account.h: mbox_size definition. Missed in previous
	commit.

2005-03-09  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-global-catalog.c (get_quota_values): Reading "mDBUseDefaults"
	attribute to check if the user level quota settings are enabled or not.
	(e2k_global_catalog_lookup): Added "mDBUseDefaults" attribute to quota
	attribute list.

	* storage/exchange-account.c (setup_account_hierarchies): Reading total
	size for all the personal folders. Not returning "FALSE" in case 
	favorite folders does not exist. Not an error condition.
	(exchange_account_connect): Printing the quota warning, only if user's
	mail box size exceeds the quota limit set. Fixes #72389

	* storage/exchange-hierarchy-webdav.[ch](init): Initializing the total
	folder size.
	(exchange_hierarchy_webdav_get_total_folder_size): Returns total size 
	of all the folders.
	(rescan)(exchange_hierarchy_webdav_get_folder_size): Calculates the 
	total size for all the folders.
	
2005-03-08  Sushma Rai  <rsushma@novell.com>

	* shell/e-folder-misc-dialogs.c (do_foreign_folder_dialog): Removed the
	corba method which was still being used to retrieve user's e-mail
	address.
	(user_clicked): Making name selector dialog modal.
	(setup_name_selector): Adding the user name entry widget to the name
	selector dialog.
	 Fixes #73218

2005-03-07 Sivaiah Nallagatla <snallagatla@novell.com>

	* calendar/e-cal-backend-exchange.c (set_mode) :
	make sure we set proper value to priv->read_only 
	Atleast should Fix #72168 & #72951 

2005-03-07  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* configure.in : Bumped the version to 2.2.0
	* NEWS : Updated

2005-03-07  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-account.c (exchange_account_new): Setting the
	porotcol based on OWA URL specified by the user, instead of use_ssl
	parameter. Since we don't have a SSL section now, use_ssl is getting
	lost when user does modifications to his account settings.
	Fixes #73202, #72834, #73017, #72836, and #72881

2005-03-03  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Added mail filters and junk mail
	filters settings to "Options" section in exchange_conf_entries[] 
	structure so that they appear in receive options page.
	Fixes #73237	
 
2005-03-03  Rajesh Ranjan  <rranjan@redhat.com>

	* configure.in : Added hi to ALL_LINGUAS.

2005-02-28  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.6
	* NEWS : Updated
	* Updated the po files and the docs

2005-02-28  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-hierarchy-webdav.c (scan_subtree): Removed an object
	getting unrefed twice. Fixed #73079
	* camel/camel-exchange-folder.c (class_init): There was a duplicate
	declaration for refresh_info

2005-02-28  Sushma Rai  <rsushma@novell.com>
	
	* lib/e2k-autoconfig.c (validate): Reverted fix for #72514, as it
	breaks string freeze.

2005-02-28  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (account_changed): Checks if
	user needs to authenticate again, based on the url changes.
	(requires_relogin): Compares the current url with the modified 
	url, to see if user needs to relogin.

2005-02-28  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-oof.c (sync_oof_info): Checking for NULL OOF 
	message. Fixes the crash when oof_info file gets created here.

2005-02-28  Sarfraaz Ahmed <asarfraaz@novell.com>

	* exchange-oof.h (exchange_oof_set) : This got missed in the previous 
	commit.

2005-02-27  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-oof.c (sync_oof_info): If oof_info file exists and
	has more recent data set using account editor updates the server with
	this information. If server has more recent oof data, entered either
	through out of office assistant dialog from exchange component or
	through any other client, then updates oof_info file, so that account
	editor displayes the proper state and message, reading this file.
	(exchange_oof_init)(update_state): Calls exchange_oof_set() with
	"updated" flag set to TRUE, based on which the oof_info files gets
	updated.
	(exchange_oof_get): Invokes sync_oof_info().
	(exchange_oof_set): Calls sync_oof_info() to write the data to the file,
	when file contents need to be updated.
	(exchange_oof): Checks for oof message and sets the buffer.
	Fixes #72709.

2005-02-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c : The mode on the backend was not
	being set back to REMOTE when turned online. Fixed this now.
	* camel/camel-exchange-folder.c (get_message_data): Dont contact mailer
	in offline mode.
	(camel_exchange_folder_update_message_tag): Similar
	* camel/camel-exchange-folder.h : Similar
	* camel/camel-exchange-store.c (exchange_get_folder): Send the offline
	state while creating the new folder
	* mail/mail-stub-exchange.c: Modified to use the new offline checking
	method.
	(refresh_folder_internal): Return the data in the stub if offline.
	* storage/exchange-account.c : Use the new offline checking method
	(exchange_account_is_offline_sync_set): Make it return the proper error
	values using the enums for offline.
	* storage/exchange-account.h : Use the new offline checking method
	* storage/exchange-component.c : Similar
	* storage/exchange-component.h : Similar
	* storage/exchange-config-listener.c: Similar
	* storage/exchange-hierarchy-favorites.c : Similar
	* storage/exchange-hierarchy-somedav.c : Similar
	* storage/exchange-hierarchy-webdav.c : Similar
	* storage/exchange-offline-listener.c : Should now send a proper value
	for an error condition. 
	* storage/exchange-offline-listener.h : Added new enum for this.
	Fixes #71519

2005-02-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (add_ical) : Now updates
	the cache with the status tracking info
	(get_changed_events): Added the enums for tracking info to be sent to
	add_ical

2005-02-26  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-account.c (get_password): Forgetting temporarily
	stored password, once the exchange component is set to interactive.
	Fixes #73017.

2005-02-26  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-autoconfig.c (validate): Removed the hard coded support url
	from translateable error message. Fixes #72514

2005-02-26  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-autoconfig.c (validate):
	* camel/camel-exchange-provider.c (exchange_validate_user_cb): Removed
	unnecessary memory allocation.

2005-02-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-folder-size.c : Modified most of the code for
	displaying the folder sizes in a sorted order. Also added code to
	update the store with new folder sizes, called after a refresh.
	* storage/exchange-folder-size.h : Similar
	* storage/exchange-hierarchy-webdav.c (rescan) : Fetch the folder
	sizes during a rescan as well.
	(exchange_hierarchy_webdav_parse_folder) : Now send a double value
	instead of a string for the folder size.
	Fixes #72104

2005-02-24  Sivaiah Nallagatla <snallagatla@novell.com>
                                                                                
        * addressbook/e-book-backend-exchange.c
        (e_book_backend_exchange_get_contact_list) :
        We should not be using e_data_book_respond_ calls, as we are
        a sync backend. Fixes #72946
        (e_book_backend_exchange_create_contact) :
        Don't use e_data_book_respond and don't
        return success here. We are in offline
        mode.
        Fixes #72945

2005-02-24  Hans Petter Jansson  <hpj@novell.com>

	* lib/e2k-autoconfig.c:
	* lib/test-utils.c:
	* storage/exchange-account.c:
	* storage/exchange-autoconfig-wizard.c:
	* storage/exchange-hierarchy-webdav.c:
	* storage/main.c:
	* storage/ximian-connector-setup.c:
	Update the includes for e-passwords.h to reflect its new location.

2005-02-20  Sushma Rai <rsushma@novell.com>

	* addressbook/e-book-backend-gal.c (func_is_or_begins_with): Allowing
	the query "beginswith fileAs" without any value, which is formed for
	building GAL cache. Fixes #72170
	(generate_cache_handler): Checking for the LDAP message type while 
	building the cache.
	(set_mode): Setting GAL addressbook not editable, when turning online
	from offline mode.

2005-02-20  Sushma Rai <rsushma@novell.com>
	
	* storage/exchange-account.[ch] (exchange_account_is_offline_sync_set):
	Added new, to read the offline_sync value set for the account.
	(exchange_account_new): Checking for the account level offline sync setting
	and storing it.

	* storage/exchange-config-listener.c (add_esource): Checking for the 
	account level and folder level offline sync values and updating the 
	e-sources.

2005-02-19  Sarfraaz Ahmed <asarfraaz@novell.com>

	* camel/Makefile.am : Now link camel with krb5 for working around
	libtool glitch on SuSE.

2005-02-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/xc-commands.c (do_folder_size_menu): Enable popping of
	folder size dialog from the menu. Fixes #72099

2005-02-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c : Fixed a build break

2005-02-10  Jeffrey Stedfast  <fejj@novell.com>

	* camel/camel-exchange-search.c (exchange_body_contains): Check
	network availability. If unavail, fall back to parent search class
	body_contains() method.

2005-02-12  Arafat Medini <kinryu@silverpen.de>

	* configure.in  Readded Arabic locale ar to ALL_LINGUAS

2005-02-11  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (add_vevent) : Always
	set the TRANSP property from the busy status. Fixes #70283
	(receive_objects) : Fixed a memory leak. Fixes #72482

2005-02-11  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (account_changed): Removing the 
	esources for the account before asking for restart, if owa url is 
	modified. Fixes #71995.

2005-02-10  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-autoconfig.c (validate): Changed the support URL value.
	Fixes #71800

2005-02-10  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c (exchange_auto_detect_cb): Adding
	GC server to the table of auto detected values.
	(exchange_validate_user_cb): Setting ad_server paramemter value in
	CamelUrl.

	* lib/e2k-autoconfig.c (e2k_validate_user)(validate): Reading the GC
	server value.
	Fixes #71878

2005-02-10  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Setting HIDDEN_AUTH in 
	exchange_provider structure, so that it auth section doesn't
	appear while creating an account.

2005-02-09  Sushma Rai  <rsushma@novell.com>
	
	* storage/exchange-account.c (change_passwd_cb): Setting the new
	password entered when change password is invoked by password expiry
	check. Fixes #72091

2005-02-09  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-account.c (exchange_account_new): Not setting
	default warning period, if user has not selected password expiry
	warning option. 
	(find_passwd_exp_period): Finding the password expiry period and showing
	warning, only if user has selected that option. 
	Fixes #72093

2005-02-08  David Malcolm  <dmalcolm@redhat.com>

	* addressbook/Makefile.am, calendar/Makefile.am,
	camel/Makefile.am,  mail/Makefile.am, shell/Makefile.am,
	storage/Makefile.am, lib/Makefile.am:

	Use appropriate libtool macro for convenience libraries
	(_LTLIBRARIES, rather than _LTLIBRARIES), since some architectures
	do not allow using static libraries this way.

2005-02-08  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-folder.c (camel_exchange_folder_construct): 
	Storing tag information in summary file. Fixes #71555 

2005-02-07  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.5
	* NEWS : Updated
	* Updated the po files	

2005-02-07  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-gal.c (func_contains): Handling the
	query with the attribute fileAs. Fixes Gal lookup from user selection
	dialog, which was was not working as the query now is having 
	fileAs=username.

2005-02-04  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* po/POTFILES.in : Updated with the missing files.

2005-02-04  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c (set_mode): Fix the race by 
	having a local variable.
	* camel/camel-exchange-store.c (exchange_get_folder_info): The check
	for offline check should actually be done in mail.
	* mail/mail-stub-exchange.c (get_folder)(sync_deletions)
	(refresh_folder_internal)(mail_stub_exchange_new) : Dont contact server 
	when in	offline mode.
	* storage/exchange-account.c (exchange_account_open_folder): Check for 
	offline mode. 
	(exchange_account_is_offline) : A wrapper around the component check
	for offline mode.
	(setup_account_hierarchies) : Extracted this code to be used in offline
	and online modes.
	(exchange_account_connect) : Move code and fix warnings.
	* storage/exchange-account.h : Similar
	* storage/exchange-component.c (new_connection) : check for offline
	(exchange_component_get_account_for_uri) : Dont check for offline here.
	(exchange_component_is_offline) : Returns the component's current state. 
	* storage/exchange-component.h : Similar
	* storage/exchange-hierarchy-favorites.c (get_hrefs) : Scan the offline
	tree when in offline.
	(add_hrefs) : A callback helper method for offline scanning of folders.
	* storage/exchange-hierarchy-foreign.c (scan_subtree) : Pass the online
	and offline status of the component.
	* storage/exchange-hierarchy-somedav.c (scan_subtree) : Similar
	* storage/exchange-hierarchy-webdav.c (create_folder)(remove_folder)
	(xfer_folder)(rescan) : Dont contact server if offline.
	(scan_subtree) : Scan the offline tree stored on disk when offline
	(add_folders) : A helper callback method for offline scanning
	* storage/exchange-hierarchy.c (scan_subtree)
	(exchange_hierarchy_scan_subtree) : Pass on the offline state
	* storage/exchange-hierarchy.h : Similar
	* storage/exchange-storage.c (account_to_storage_result)
	(idle_open_folder) : Set the errors for describing offline mode.

2005-02-04  Sarfraaz Ahmed <asarfraaz@novell.com>

        * addressbook/e-book-backend-gal.c :
        * lib/e2k-types.h :
        * shell/e-folder-creation-dialog.c :
        * shell/e-folder-dnd-bridge.c :
        * shell/e-folder-misc-dialogs.c :
        * shell/e-folder-selection-dialog.c :
        * shell/e-storage.c :
        Should now be using gi18n.h/gi18n-lib.h

2005-02-04  Kostas Papadimas <pkst@gnome.org>

        * configure.in (ALL_LINGUAS): Added 'el' (Greek).

2005-02-02  JP Rosevear  <jpr@novell.com>

	* storage/main.c (main): bind to the GETTEXT_PACKAGE domain, not
	PACKAGE

2005-02-02  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (discard_alarm):
	Fixed a leak
	* calendar/e-cal-backend-exchange.c : Removed a typo.
	* camel/camel-exchange-store.c (make_folder_info): Mark the inbox
	flag which is newly added in camel.
	* camel/camel-stub-constants.h : Declare the new camel flags.
	* mail/mail-stub-exchange.c (get_folder_info): Set the flag for
	inbox folder

2005-02-01  Rodrigo Moya <rodrigo@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (create_object,
	modify_object_with_href, remove_object): removed usage of
	removed categories API.

2005-01-29  Sarfraaz Ahmed <asarfraaz@novell.com>

        * storage/exchange-hierarchy-webdav.c (hierarchy_new_folder):
        Check for duplicate entried being added into the hashtable.
        Fixes #68330

2005-01-28  Žygimantas Beručka  <uid0@akl.lt>

	* configure.in (ALL_LINGUAS): Added 'lt' (Lithuanian).

2005-01-27  Sushma Rai  <rsushma@novell.com>

	* exchange-config-listener.[ch] (add_esource)(remove_esource): 
	Changed the arguments for the function. Now reading folder type,
	instead of is_contact_folder flag. 
	Defined Gconf Key values in the header file so that it need not be
	defined by every function calling add/remove esource functions.
	Selecting calendar and tasks automatically, when the account or folder
	is created and unsetting when account or folder is removed.
	(add_sources)(remove_sources): Sending folder type to add_esource()/
	remove_esource() functions. Fixes #71432
	
	* storage/e-folder-exchange.c (e_folder_exchange_new)
	(e_folder_exchange_delete): Similar.

	* storage/exchange-hierarchy-gal.c (exchange_hierarchy_gal_new): Similar
	
	* storage/exchange-hierarchy-foreign.c (remove_folder)
	(exchange_hierarchy_foreign_add_folder): Similar.

	* storage/exchange-hierarchy-favorites.c (remove_folder): Similar.

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Similar.

2005-01-25  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-account.c (exchange_account_connect): Properly
        set use_ntlm when reconnecting to server. This now tries either
        Basic or Plaintext authentication if one of them fails. Patch submitted
        by Soren Hansen and fixes #70730

2005-01-25  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.4
	* NEWS : Updated
	* addressbook/e-book-backend-exchange.c : fixed some warnings
	* Updated the po files

2005-01-24  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Added CAMEL_URL_ALLOW_AUTH to
	provider structure.

2005-01-24  Sarfraaz Ahmed <asarfraaz@novell.com>

	* camel/camel-exchange-folder.c (transfer_messages_to):
	We should now call journal_transfer instead of journal_append
	* camel/camel-exchange-journal.c : Handle transfer of messages
	and also updating the flags.

2005-01-24  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c: Added offline support
	for personal addressbook. 

2005-01-23  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Changed owa_url variable type.

	* lib/e2k-autoconfig.c: similar.

	* lib/e2k-validate.h: similar.

2005-01-22  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-account.c (exchange_account_new): Added owa_url
	parameter to ExchangeAccount structure and reading it's value.
	(finalize): free for owa_url

	* lib/urltest.c: Added new. Test program which takes url as input
	and prints E2kUri structure parameters.

	* lib/Makefile.am: Handling urltest.c

2005-01-20  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* calendar/e-cal-backend-exchange-calendar.c : Add a check to not fetch
	data from server in offline mode.
	* calendar/e-cal-backend-exchange.c : Modify the error message string.
	* storage/e-folder-exchange.c : This is a hack right now. A better fix
	needs to be done down the line.
	* storage/exchange-offline-listener.c : Minor argument checks.

2005-01-19  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Added one more parameter to
	user validation function, for reading remember password flag value.

	* lib/e2k-validate.h: Similar.

	* lib/e2k-autoconfig.c (e2k_validate_user): Forming the password hash
	key once we read the hostname. And remembering the password if the 
	user is a valid user, so that account setup will not prompt for
	password second time at the end.

	* storage/exchange-account.c (get_password): If the password is 
	remembered, and user has not sleceted remember password option,
	forgetting the password remembered.
	 
2005-01-18  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-autoconfig.c (validate): Handling error coders, and
	displaying warning messages when user is not authenticated
	to the server. Fixes #71389
	(e2k_validate_user): In case of wrong credentials forgetting the
	password so that, password dialog pops up when user presses
	OK button without changing any input values. 

2005-01-18  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* calendar/e-cal-backend-exchange-calendar.c : Ordered the code to now
	build the proper mime message for attachments to be sent to the server.
	* calendar/e-cal-backend-exchange-tasks.c : Fixed some warnings	
	* calendar/e-cal-backend-exchange.c : Re-ordered some code and fixed
	some warnings.

2005-01-17  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Moved password expiry warning 
	period and offline sync options under one section.

2005-01-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c : Fixed the add_ical and
	get_changed_events functions to now geenrically fetch the attachments
	created either from Outlook or OWA.

2005-01-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (modify_object_with_href):
	Fixed a memory leak causing a crash on modifying an appointment.

2005-01-15  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Enabled offline sync
	check box for Exchange provider in exchange_conf_entries[].

	* calendar/e-cal-backend-exchange.c (open_calendar):
	Handling offline_sync esource property.

	* storage/exchange-account.c: (exchange_account_new): Reading 
	and storing offline sync. and password expiry warning period value set.
	(finalize): Freeing offline sync variable.
	(find_passwd_exp_period): Using the password expiry warning period
	value set instead of default value.

2005-01-12  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-provider.c: Added private function
	to validate user credentials.

2005-01-10  Not Zed  <NotZed@Ximian.com>

	* mail/mail-stub.c (mail_stub_read_args): long/int ->uint32.
	(mail_stub_return_data): "

	* camel/camel-stub.c (stub_send_internal): uint32 should be a
	uint32, not a long.
	(stub_send_internal): same for uint32array and int

2005-01-10  Sarfraaz Ahmed <asarfraaz@novell.com>

	* camel/camel-exchange-journal.c : Added a new file for handling
	offline journaling. Implemented the class members.
	* camel/camel-exchange-journal.h : Similar
	* camel/camel-exchange-folder.c (append_message): Handle offline
	message appending
	(transfer_messages_to): Handle offline copying/moving of messages
	(camel_exchange_folder_construct): Create the journal entry file.
	* camel/camel-exchange-folder.h : Include journal object.
	* camel/Makefile.am : Included camel-exchange-journal.[ch]

2005-01-10  Jeffrey Stedfast  <fejj@novell.com>

	* camel/camel-exchange-folder.c (exchange_sync): Implemented.
	(exchange_sync_online): Removed.
	(exchange_expunge_uids_online): Removed.
	(exchange_cache_message): Removed.

	* camel/camel-exchange-store.c (exchange_connect_online): Removed.
	(exchange_connect_offline): Removed.
	(exchange_disconnect_online): Removed.
	(exchange_disconnect_offline): Removed.
	(exchange_get_folder_online): Removed.
	(exchange_get_folder_info_online): Removed.
	(exchange_get_folder): Handle offline folder getting.
	(exchange_get_folder_online): Removed.

2005-01-10  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.3
	* NEWS : Updated
	* addressbook/e-book-backend-gal.c :
	* calendar/e-cal-backend-exchange-calendar.c : 
	* calendar/e-cal-backend-exchange.h :
	* camel/Makefile.am :
	* lib/Makefile.am : Added e2k-validate.h
	* storage/exchange-folder-size.c : 
	* storage/main.c : Fixed warnings in all these files.
	Updated the po files as well.

2005-01-10  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c : Enable send options.

2005-01-10  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* calendar/e-cal-backend-exchange.c : Fixed a warning
	* calendar/e-cal-backend-exchange-calendar.c (add_ical): Sets the
	icalattach property
	(get_attachment) : Fetched the attachment from the server.
	(get_changed_events): Calls get_attachment is object has attachment
	(build_attachment): Builds the attachment mime part
	(create_object): This now adds the attachment

2005-01-10  Hans Petter Jansson  <hpj@novell.com>

	* addressbook/e-book-backend-gal.c (gal_connect): Store the account for
	future reference.
	(ldap_op_finished): Add robustness check.
	(get_contact_handler): Ditto.
	(get_contact): Implement offline case.
	(contact_list_handler): Add robustness check.
	(get_contact_list): Implement offline case.
	(poll_ldap): Set poll_timeout to -1 if we disconnect the poll.
	(ldap_search_handler): Add robustness check.
	(start_book_view): Implement offline case.
	(generate_cache_handler): Implement.
	(generate_cache_dtor): Implement.
	(generate_cache): Implement.
	(ldap_cancel_op): Add robustness check.
	(set_mode): Implement online/offline switching.
	(get_required_fields): Silence a warning.
	(load_source): Implement offline case. Initialize cache.
	(dispose): Free cache.

2005-01-08  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-tasks.c : Return error messages
	for operations not supported in offline.
	* calendar/e-cal-backend-exchange.c : Similar

2005-01-07  Sarfraaz Ahmed <asarfraaz@novell.com>

	* camel/camel-exchange-folder.c : Now implements the CamelFolderDisco
	class methods. Needed for making folders available when offline.
	* camel/camel-exchange-folder.h : Similar
	* camel/camel-exchange-store.c : CamelExchangeStore is now derived
	from CamelDiscoStoreClass. Implemented the virtual functions for this.
	* camel/camel-exchange-store.h : Similar

2005-01-07  Sarfraaz Ahmed <asarfraaz@novell.com>

	Patch submitted by JP Rosevear for SelectNames fix.
	* configure.in : Now check for libedataserverui as well.
	* lib/Makefile.am : Removed the IDL files.
	* shell/Makefile.am : Similar
	* lib/e2k-user-dialog.c : Replaced the CORBA methods with the 
	e-name-selector methods.
	* shell/e-folder-misc-dialogs.c : Similar

2005-01-05  Sarfraaz Ahmed <asarfraaz@novell.com>

	* addressbook/e-book-backend-exchange.c : Enabled offline support
	* addressbook/e-book-backend-gal.c : Similar
	* calendar/e-cal-backend-exchange-tasks.c : Similar
	* storage/exchange-account.c : Similar
	* storage/exchange-component.c : Similar
	* storage/exchange-component.h : Similar
	* storage/exchange-offline-listener.c : Similar
	* storage/main.c : Similar
	* calendar/e-cal-backend-exchange-calendar.c : Similar. Also fixed 
	some memory leaks
	* calendar/e-cal-backend-exchange.c : Offline and memory leak fixes.

2004-12-21  Sarfraaz Ahned <asarfraaz@novell.com>

	* addressbook/e-book-backend-exchange.c: Added offline error handling
	changes.
	* addressbook/e-book-backend-gal.c : Similar
	* calendar/e-cal-backend-exchange.c (e_cal_backend_exchange_add_object):
	The cache now checks for duplicate detatched instances before adding
        them. This fixes #70414
	(discard_detached_instance): Small leak fixed.
	* storage/e-folder-exchange.c : Added error checks
	* storage/exchange-folder-size.c : Object freeing code added.

2004-12-21  JP Rosevear  <jpr@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c: update for
	remove/modify api changes

	* calendar/e-cal-backend-exchange-tasks.c: ditto

	* calendar/e-cal-backend-exchange.c: ditto	
	
2004-12-20  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.2
	* NEWS : Updated

2004-12-20  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Now checking for camel-provider

2004-12-16  Sushma Rai <rsushma@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c : Fixed some memory leaks. 
	* calendar/e-cal-backend-exchange.c: ditto
	* storage/exchange-hierarchy-foreign.c: ditto
	* storage/exchange-hierarchy-webdav.c: ditto

2004-12-15  Rodrigo Moya <rodrigo@novell.com>

	* addressbook/e-book-backend-exchange.c: use libedataserver's e-sexp.h.

	* calendar/e-cal-backend-exchange.c (receive_objects, book_resource):
	pass correct number of arguments to e_cal_backend_notify_object_removed.

	* storage/Makefile.am: removed exchange-offline-utils.[ch] from build.

2004-12-15  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c : Fixed some memory leaks.
	* calendar/e-cal-backend-exchange-tasks.c : Modified a structure member
	* calendar/e-cal-backend-exchange.h : Similar

2004-12-15  Sushma Rai <rsushma@novell.com>

	* configure.in: Corrected camel provider directory path.

2004-12-15  Sushma Rai <rsushma@novell.com>
	
	* calendar/e-cal-backend-exchange-calendar.c:
	Fixed several memory leaks.

2004-12-14  Sarfraaz Ahmed <asarfraaz@novell.com>

	* lib/e2k-path.c : Moved this from evolution/e-util as this is no
	longer present there after camel moved to e-d-s.
	* lib/e2k-path.h : Similar
	* lib/Makefile.am : Included the above files
	* storage/exchange-offline-utils.c : Has the utility functions used
	by offline code.
	* storage/exchange-offline-utils.h : Similar
	* storage/Makefile.am : Added the above files
	*  camel/camel-exchange-store.c : Fixed to make use of e2k-path methods
	(exchange_path_to_physical : Added this new function from e-path.c
	* storage/exchange-hierarchy-webdav.c : Now includes e2k-path.h
	* storage/exchange-offline-listener.c : Marked for offline.
	* storage/e-folder-exchange.c : Now makes use of e2k-path.h 

2004-12-14  Sushma Rai <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c (proppatch_address)
	(e_book_backend_exchange_modify_contact)(notify_remove):
	Fixed some memory leaks.

	* addressbook/e-book-backend-gal.c (contact_list_handler)
	(start_book_view)(load_source): ditto

	* storage/exchange-migrate.c (make_dir)(form_dir_path)
	(get_contacts_dir_from_filename): ditto

2004-12-11  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Fix up camel version to now be 1.2
	* camel/Makefile.am : Include the GLIB_CFLAGS

2004-12-10  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (add_ical): Fixed some
	memory leaks
	* calendar/e-cal-backend-exchange.c : Some more here.

2004-12-09  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (open_calendar)
	(create_object)(send_objects) : Return appropriate error messages
	when in offline
	* calendar/e-cal-backend-exchange-tasks.c (open_task)
	(create_task_object) : Similar
	* calendar/e-cal-backend-exchange.c (get_cal_address) (get_mode)
	(set_mode) (e_cal_backend_exchange_get_cal_address) : Handle special
	cases when in offline.
	(open_calendar)(load_cache) : Modify to actually load only the cache
	when in offline
	(e_cal_backend_exchange_is_online) : Return the online/offline status
	of the calendar.
	* calendar/e-cal-backend-exchange.h : Added the prototype of
	e_cal_backend_exchange_is_online
	

2004-12-09  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-account.c (exchange_account_set_offline): Prepares 
	the account for offline caching in all the data necessary and sets it 
	to offline.
	(exchange_account_set_online): Sets the account to online mode and 
	tries to setup a connection with the server.
	(exchange_account_connect): This should now connect only if online.
	* storage/exchange-account.h : Added the function declarations.
	* storage/exchange-component.c (exchange_component_set_offline_listener):
	Sets a reference of the OfflineListener in the global ExchangeComponent 
	object.
	(exchange_component_get_account_for_uri) : This returns the defaul 
	account when in offline. This needs to be further fixed to handle 
	multiple accounts based on the uri passed.
	* storage/exchange-component.h : Similar
	* storage/exchange-offline-listener.c : Fixed some namespace issues.
	* storage/exchange-offline-listener.h : Similar
	* storage/main.c (main): This now instantiates an OfflineListener object
	instead of the previous procedural methods.

2004-12-09  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-offline-listener.c : Added this new file which now
	contains the offline-listener class implementation
	* storage/exchange-offline-listener.h : Similar
	* storage/Makefile.am : Included the above 2 files.

2004-12-09  Sushma Rai <rsushma@novell.com>

	* storage/main.c (main): Calling camel_init with the 
	camel_cert.db file path.  Fixes #66932

2004-12-01  Sarfraaz Ahmed <asarfraaz@novell.com>

	* mail/mail-stub-exchange.c (get_folder): Do not set the FILTER_JUNK
	flag for Trash folder. This fixes #66963

2004-11-30  Sarfraaz Ahmed <asarfraaz@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_set_mode) : This sets the mode to either 
	online/offline.

2004-11-30  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c (get_mode): Now returns the proper
	mode of the calendar [ online/offline ]
	(set_mode) : Sets the calendar mode to online/offline

2004-11-30  Sarfraaz Ahmed <asarfraaz@novell.com>

	* Updated the po files

2004-11-30  Sushma Rai <rsushma@novell.com>

	* storage/exchange-account.c (find_passwd_exp_period): Calling
	password expiry warning dialog.
	
	* storage/exchange-account.c (display_passwd_expiry_message)
	(change_passwd_cb): Added new, to display password expiry warning
	dialog, which can be used to invoke change password dialog.

	* storage/exchange-passwd-expiry.glade: Dialog for displaying 
	password expiry warning.

	* storage/Makefile.am: Added glade files exchange-folder-tree.glade
	and exchange-passwd-expiry.glade

	* lib/gctest.c (do_lookup): Finding password expiry period.

2004-11-30  Sarfraaz Ahmed <asarfraaz@novell.com>

        * configure.in : Removed the DEPRECATED symbols. This is for building
        against Gnome 2.9

2004-11-30  Sushma Rai <rsushma@novell.com>

	* storage/e-folder-exchange.c (e_folder_exchange_get_folder_size)
	(e_folder_exchange_save_to_file): Handling return value on error.

	* storage/exchange-folder-size.c (exchange_folder_size_display)
	Fixed a compile time warning.

2004-11-29  Sarfraaz Ahmed <asarfraaz@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_get_required_fields): Added new
	* addressbook/e-book-backend-gal.c
	(get_required_fields): Added new
	The above two methods were added for the required_field support by
	Sivaiah.

2004-11-27  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-webdav.c:
	(exchange_hierarchy_webdav_parse_folder): Calling
	exchange_folder_size_update() only if permanenturl is
	not NULL. Fixes the crash while bringing up
	exchange-storage.
	Also fixed couple of compile time warnings.

2004-11-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Bumped the version to 2.1.1
	* NEWS : Updated
	* storage/e-folder-exchange.c : Fixed some warnings.
	* storage/exchange-folder-size.c : Similar
	* storage/exchange-hierarchy-webdav.c : Similar
	* storage/main.c : Similar

2004-11-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/xc-commands.c (do_folder_size_menu) : Have a dummy place
	holder for the menu item for fodler sizes.

2004-11-25  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-hierarchy-webdav.c (init): Was not instantiating
	the FolderSize object properly. Fixed this now.

2004-11-24  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* storage/main.c (set_online_status)(online_status_changed)
	(setup_offline_listener) : Implemented
	(main) : Added code to invoke the offline listener. As of now this
	does not get compiled unless OFFLINE_SUPPORT is defined manually
	in the Makefile. Planning to remove this once the code is fully done.
	* storage/xc-commmands.c : Removed some unused variables.

2004-11-23  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-folder-size.c (exchange_folder_size_update):
	Fixed a crash. The private member was being used uninitialised.
	* storage/exchange-hierarchy-webdav.c : Similar
	* storage/exchange-hierarchy-webdav.h : Similar
	* docs/debug : Added some more examples.

2004-11-23  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/xc-commands.c (do_folder_size): Hook for showing the folder
	sizes. Missed this out in my previous commits.

2004-11-12  Not Zed  <NotZed@Ximian.com>

	** merged notzed-messageinfo-branch.

2004-11-10  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* po/POTFILES.in : Added storage/exchange-folder-size.c and
	storage/exchange-folder-tree.glade

2004-11-10  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-hierarchy-webdav.c (dispose): Added
	(class_init): Now instantiates the ExchangeFolderSize class
	(exchange_hierarchy_get_folder_size): Returns the foldersize object
	(exchange_hierarchy_webdav_parse_folder): Fetches and updates the 
	folder size
	* storage/exchange-hierarchy-webdav.h : Similar
	* storage/Makefile.am : Added the new files

2004-11-11  Not Zed  <NotZed@Ximian.com>

	* camel/camel-exchange-folder.c
	(camel_exchange_folder_add_message): make it work with message_id
	rather than references->references[0] again.

2004-11-10  Not Zed  <NotZed@Ximian.com>

	* camel/camel-exchange-folder.c (camel_exchange_folder_construct):
	update for camel api changes, don't handle info set methods
	anymore, and handle the message_id -> references[0] change.

	* camel/camel-exchange-summary.c: updated for camel
	implemenentation changes, now emit folder changed events from
	here, and handle the tag and flags set methods, and set the folder
	on the summary.

2004-11-09  Sarfraaz Ahmed <asarfraaz@novell.com>

	* MAINTAINERS : Added a new file

2004-11-08  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-folder-size.c : Revamped the code to now be a class
	so other hierarchy classes can now instantiate this as an object and
	this class handles only the displaying of the folder tree
	* storage/exchange-folder-size.h : Similar

2004-11-04  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-folder-size.c : Added a new file. This handles the
	displaying of the folder sizes
	* storage/exchange-folder-size.h : Similar
	* storage/exchange-folder-tree.glade : The dialog for displaying the 
	folder tree and the folder sizes

2004-11-04  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-account.c (exchange_account_connect): Finding
	password expiry period. Removed unused variables.
	(find_passwd_exp_period): Finds the days left for password to expire
	and displys the warning. 

	* lib/e2k-global-catalog.[ch] (e2k_global_catalog_lookup)
	(get_account_control_values): Finding the value of the attribute 
	userAccountControl.
	(find_domain_dn): Forming the base DN for the LDAP search for maxPwdAge
	from domain name.
	(lookup_passwd_max_age): Finds the value of the attribute maxPwdAge.

	* lib/gctest.c (do_lookup): Looking up for userAccountControl and maxPwdAge
	attributes.

2004-11-03  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-account.c (exchange_account_connect)(exchange_account_new)
	: Check if the user has provided a domain as part of the username field and
	store it for connecting to the server using form-based-authentication
	(finalize) : Cleanup the private member.

2004-11-01  JP Rosevear  <jpr@novell.com>

	* storage/Makefile.am (DISTCLEANFILES): dist clean the server file

	* Makefile.am: add intltool-* to distclean files

2004-10-21  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-factory.c (_todos_new_backend) :
	Changed the object type from ECalBackendExchange to 
	ECalBackendExchangeTask
	(_events_new_backend) : Similarly changed to ECalBackendExchangeCalendar

2004-10-18  Sarfraaz Ahmed <asarfraaz@novell.com>

	* lib/Makefile.am: Reorder the LDAP_LIBS
	* storage/Makefile.am: Similar
	* docs/debug : Added an example for gctest

2004-10-18  Sushma Rai  <rsushma@novell.com>

	* configure.in: version 2.1.0

2004-10-14  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* camel/camel-exchange-provider.c: (camel_provider_module_init):
	Initialize codeset here too.

2004-10-13  Sarfraaz Ahmed <asarfraaz@novell.com>

	* lib/e2k-propnames.h.in : Added a new mapi proptag for folder size.
	* storage/e-folder-exchange.c (e_folder_exchange_get_folder_size)
	(e_folder_exchange_set_folder_size): Implemented
	(e_folder_exchange_save_to_file) (e_folder_exchange_new_from_file):
	Now take care of the folder size as well
	* storage/e-folder-exchange.h: Similar
	* storage/exchange-account.c (exchange_account_connect): Check
	for quota information.
	* storage/exchange-hierarchy-webdav.c (hierarchy_new_folder) (add_href)
	: Add check for some warnings.
	(exchange_hierarchy_webdav_parse_folder): Set the folder size for the
	folder
	* storage/xc-commands.c (do_folder_size): Implementated
	* storage/ximian-connector.xml: Added the verb for folder size

2004-10-12  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/main.c: (main):
	* storage/ximian-connector-setup.c: (main):
        Initialize codeset for textdomain. Patch by Frederic Crozat.

2004-10-08  Sarfraaz Ahmed <asarfraaz@novell.com>

        * calendar/e-cal-backend-exchange-calendar.c (book_resource): Make
        connector actually create the meeting for the resource without
        sending a mail.
        (send_objects): Send the proper users list back to the client.
        (modify_object_with_href): This now enables to send a meeting for
        a specific href. This fixes #67510

2004-10-08  Sushma Rai  <rsushma@novell.com>
	
	* camel/camel-exchange-folder.c: Include camel-i18n.h

	* camel/camel-exchange-store.c: ditto

	* camel/camel-exchange-transport.c: ditto

	* camel/camel-stub.c: ditto

2004-10-05  Sushma Rai  <rsushma@novell.com>

	* storage/main.c (setup_addressbook_factory): Registering
	GAL backend.

	* addressbook/e-book-backend-gal-factory.h: Added missed out semicolon.

	* addressbook/Makefile.am: Added missed out slash, compiles gal
	factory files.
 
	* addressbook/e-book-backend-exchange-factory.c
	(e_book_backend_exchange_factory_get_type): Indented properly.
 
	* addressbook/e-book-backend-gal-factory.c : Added Copyright info
	(e_book_backend_gal_factory_get_type): Making the type static.
	
	* calendar/e-cal-backend-exchange-factory.c
	(events_backend_exchange_factory_get_type)
	(todos_backend_exchange_factory_get_type): Likewise

2004-10-05  Sushma Rai  <rsushma@novell.com>

	* storage/main.c (setup_calendar_factory)(setup_addressbook_factory):
	Changed registering the factory.

	* addressbook/Makefile.am: add e-book-backend-exchange-factory.[ch]
	and e-book-backend-gal-factory.[ch]

	* calendar/Makefile.am: add e-cal-backend-exchange-factory.[ch]

	* storage/GNOME_Evolution_Exchange_Storage.server.in.in:
	Changed BookFactory and CalFactory version to 1.2

2004-10-05  Sushma Rai <rsushma@novell.com>

	* addressbook/e-book-backend-exchange-factory.[ch]: New files.
	EBookBackendFactory for exchange addressbook backend.

	* addressbook/e-book-backend-gal-factory.[ch]: New files.
	EBookBackendFactory for exchange gal backend.

	* calendar/e-cal-backend-exchange-factory.[ch]: New files.
	ECalBackendFactory for exchange calendar backend.

2004-10-03  Alexander Shopov  <ash@contact.bg>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian)

2004-10-01  Sushma Rai <rsushma@novell.com>

	* storage/main.c (setup_calendar_factory)(setup_addressbook_factory):
	Removed factory_register_methods for registering exchange
	and gal backends, and added e_data_cal_factory_register_backends()
	and e_data_book_factory_register_backends() so that 
	the compilation goes through. 

2004-10-01  Sushma Rai <rsushma@novell.com>

	* configure.in : Changed the libedata-book version to 1.2
 
2004-10-01  Sarfraaz Ahmed <asarfraaz@novell.com>

	* camel/camel-exchange-provider.c: Include camel-i18n.h now

2004-10-01  Sarfraaz Ahmed <asarfraaz@novell.com>

	* configure.in : Updated changes to now build with the head
	of evolution. Changed 2.0 to 2.2 versions.

2004-09-30  Dan Winship  <danw@novell.com>

	* mail/mail-stub-exchange.c (send_message): Remove code that was
	setting the message to use HTTP 1.0, which isn't needed with
	libsoup 2.2, and which was probably causing 65685.

2004-09-24  Christophe Merlet  <redfox@redfoxcenter.org>

        * configure.in: Added 'fr' (French) to ALL_LINGUAS

2004-09-23  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-user-dialog.c (addressbook_clicked_cb): Setting
	the window non-modal, so that the user selection dialog
	gets the focus. Fixes #65047

2004-09-22  Craig Jeffares <cjeffares@novell.com>

        * configure.in: Added 'it, zh_CN & zh_TW' to ALL_LINGUAS

2004-09-20  Sushma Rai  <rsushma@novell.com>

	* storage/xc-commands.c (xc_commands_context_menu): 
	Initialized disable_mask and hide_mask, to kill compile
	time warnings.	
	
2004-09-14  Dan Winship  <danw@novell.com>

	* camel/*.c, mail/*.c, addressbook/*.c: documentate

	* camel/camel-stub-constants.h (CamelStubFolderFlags): make this
	an enum rather than #defines, for gtk-doc goodness

	* camel/camel-stub.h (CamelStub): Remove a bunch of unused fields
	(CamelStubNewMessage, CamelStubRemovedMessage,
	CamelStubChangedMessage): Remove unused struct types

2004-09-14  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-favorites.c 
	(exchange_hierarchy_favorites_add_folder): Checking for 
	permanent_uri being NULL. Fixes #65850

2004-09-11  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (account_changed):
	Removing the just the e-sources if the user changes the 
	account name, and not forgetting the password and 
	displaying account removal warning message.
	Fixes #64188

2004-09-11  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-gal.c (build_query):
	Added check to not to return all contacts, when user 
	tries to get the mail ID from GAL,  while composing mail,
	by perfoming empty query in "Select Contacts form Addressbook"
	dialog. Fixes #41647 
	
2004-09-11  Baris Cicek <baris@teamforce.name.tr>

	* configure.in: Added 'tr' to ALL_LINGUAS

2004-09-06  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c
	(e_book_backend_exchange_remove): Moved unused variables
	to kill warnings. 

2004-09-06  Sushma Rai  <rsushma@novell.com>

	* storage/xc-commands.c: Disabled menu options for 
	move and copy folders.  See #62440

2004-09-02  Dan Winship  <danw@novell.com>

	* lib/*: Various updates to doc comments, with a few changes to
	data structures as well, to appease gtk-doc.

2004-08-30  Dan Winship  <danw@novell.com>

	* configure.in: 1.5.94.1: brown paper bag release to sync with
	evolution 1.5.94.1

2004-08-29  Hasbullah Bin Pit <sebol@my-penguin.org>

        * configure.in: Added "ms" to ALL_LINGUAS.

2004-08-27  Dan Winship  <danw@novell.com>

	* configure.in: version 1.5.94

	* NEWS: Update

2004-08-27  Dan Winship  <danw@novell.com>

	* lib/e2k-context.c (e2k_soup_message_new,
	e2k_soup_message_new_full, e2k_context_queue_message,
	e2k_context_send_message): Remove anachronisms from the docs
	(e2k_context_put_new): s/POST/PUT/ in docs.
	(e2k_context_bproppatch_start): define BPROPPATCH
	
2004-08-27  Dan Winship  <danw@novell.com>

	* lib/e2k-global-catalog.c (e2k_global_catalog_reconnect): Hm,
	remove this. It's not The Right Thing any more.

	* addressbook/e-book-backend-gal.c (gal_reconnect): Use
	e2k_global_catalog_get_ldap instead of
	e2k_global_catalog_reconnect. #63546
	(get_contact, get_contact_list, start_book_view): Use
	bl->priv->ldap rather than caching it in a local variable since it
	may change after a call to gal_reconnect.

2004-08-27  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-account.c (hierarchy_removed_folder): Typo error fix

2004-08-27  Sarfraaz Ahmed <asarfraaz@novell.com>

        * storage/exchange-account.c (hierarchy_new_folder): Avoid duplications
        in the folders hashtable. The internal uri for favorites and public
        folders are same and should not be overwritten. Also emit the signal
        only if the hashtable was updated. This fixes #64235.
        (hierarchy_removed_folder): Do not remove the internal_uri entry for
        favourite folders, since this is shared by the public folder as well.

2004-08-27  Dan Winship  <danw@novell.com>

	* addressbook/e-book-backend-gal.c: More un-debug-spewing

2004-08-26  Dan Winship  <danw@novell.com>

	* addressbook/e-book-backend-exchange.c (d): Turn off debug macro

	* addressbook/e-book-backend-gal.c (d): Likewise

2004-08-25  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (send_objects): Modified 
	the code to now send the proper attendee list. Also, removed some 
	unwanted code.

2004-08-25  Changwoo Ryu  <cwryu@debian.org>

	* configure.in: Added "ko" to ALL_LINGUAS.

2004-08-24  Rodney Dawes  <dobey@novell.com>

	* configure.in: Fix GETTEXT_PACKAGE to include -${BASE_VERSION} again
	Was accidentally removed on 2004-06-01 with "no" addition
	
2004-08-23  Danilo Šegan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2004-08-23  Jayaradha  <njaya@redhat.com>

	* configure.on: Added 'ta' Tamil to ALL_LINGUAS

2004-08-23  Sushma Rai  <rsushma@novell.com>

	* shell/e-storage-set-view.c (init): Disabling dnd.
	See #62442

2004-08-23  Takeshi AIHANA <aihana@gnome.gr.jp>

	* configure.in: Added 'ja' (Japanese) to ALL_LINGUAS.

2004-08-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» to ALL_LINGUAS.

2004-08-20  Dan Winship  <danw@novell.com>

	* addressbook/e-book-backend-gal.c: Pull up various fixes from
	e-book-backend-ldap.c

2004-08-19  Dan Winship  <danw@novell.com>

	* lib/e2k-autoconfig.c (e2k_autoconfig_get_context): Make the "is
	this really an Exchange server" checks more lenient; the current
	code fails against E2k SP2 (which people shouldn't be running any
	more, but...)
	(e2k_autoconfig_check_exchange): Try the "append /exchange if the
	path was empty" trick for E2K_AUTOCONFIG_FAILED too.

2004-08-18  Maxim Dziumanenko <mvd@mylinux.com.ua>

	* configure.in: Added uk to ALL_LINGUAS

2004-08-19  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange.c 
	(e_cal_backend_exchange_add_timezone): This was returning an invalid
	type. This fixes #61053
	* calendar/e-cal-backend-exchange.h : Similar

2004-08-19  Sushma Rai  <rsushma@novell.com>

	* camel/camel-exchange-folder.c (transfer_messages_to): 
	Not calling cache_xfer if destination uids not found.
	Fixes #63315

2004-08-18  Ilkka Tuohela  <hile@iki.fi>

	* configure.in: Added fi to ALL_LINGUAS

2004-08-16  Dan Winship  <danw@novell.com>

	* storage/exchange-hierarchy-somedav.c (scan_subtree): Bail out if
	the subclass returns 0 urls, rather than spewing g_warnings

2004-08-15  Artur Flinta  <aflinta@cvs.gnome.org>

	* configure.in: Added pl to ALL_LINGUAS.

2004-08-13  Dan Winship  <danw@novell.com>

	* configure.in: Bump version to 1.5.93

2004-08-13  Rodney Dawes  <dobey@novell.com>

	* acinclude.m4: Revert previous EVO_LDAP_CHECK changes, aren't working
	as well as expceted and determined in testing

2004-08-13  Rodney Dawes  <dobey@novell.com>

	* acinclude.m4: Remove EVO_CHECK_LIB
	Update EVO_LDAP_CHECK to support --with-openldap-{libs,includes}
	Sync with e-d-s acinclude.m4 (Adds GTK_DOC_CHECK)

2004-08-13  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* configure.in:
	Add another krb5 headers options, fix small errors
	in previous commit.

2004-08-13  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-delegates.c (exchange_delegates): Checking for NULL
	account. The tree view was returning a NULL account. This fixes #62248
	* calendar/e-cal-backend-exchange-calendar.c (update_x_properties):
	Fixed a build break.

2004-08-13  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-autoconfig-wizard.c: (autoconfig_gui_apply)
	Not allowing the user to create new account if already one
	account exists. 
	(is_active_exchange_account): Checks if account exists and active.
	Fixes #61330

2004-08-12  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* configure.in:
	Add option to specify location of kerberos 5 libraries.
	Needed for 64bits support.

2003-08-12  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c: (update_x_properties)
	Modified the logic to now use separate flags. This fixes #62852

2003-08-12  Sushma Rai  <rsushma@novell.com>
	
	* storage/exchange-account.c (get_password): Incoporated
	e_passwords_ask_password() API change.

2004-08-12  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (remove_object): Remove
	recurrences only if rid is not NULL. This fixes the crash in #62631

2004-08-12  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (discard_alarm):
	Moved this from e-cal-backend-exchange.c, since this should be in the
	calendar derived class and not in the abstract class. This fixes #45103
	* calendar/e-cal-backend-exchange.c (discard_alarm): Now just returns
	an error
	(remove_calendar): Removed some warnings.
 
2004-08-12  Sushma Rai  <rsushma@novell.com>

	* lib/e2k-context.c (write_prop): Checking for value of property
	being NULL. This fixes the crash #62259, But Internet Newsgroup 
	folder disappears from favorite folders list on restart, which 
	needs to be fixed.

2004-08-11  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (account_changed):
	Removing the source groups with old account name, when account
	name is changed.  Fixes #61332

2004-08-09  Ankit Patel <ankit@redhat.com>

	* configure.in: Added Gujarati & Panjabi

2004-08-07  Runa Bhattacharjee <runab@redhat.com>

	* configure.in: Added Bengali (bn) Locale

2004-08-07  Sushma Rai  <rsushma@novell.com>

	* mail/mail-stub-exchange.c (get_folder_info): Handling 
	favorite folder and foreign folder hierarchies, to display
	users favorite public mail folders and subscribed mail folders.	
	(account_new_folder): ditto
	(account_removed_folder): ditto 

2004-08-05  Dan Winship  <danw@novell.com>

	* lib/e2k-context.c (e2k_context_transfer_start): Make this split
	the source_hrefs into groups of E2K_CONTEXT_MAX_BATCH_SIZE so that
	we don't freak out the server when moving large numbers of
	messages. (Eg, deleting everything in my Spam folder.)

2004-08-05  Sushma Rai <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_remove): Returning error, instead of 
	disabling delete option in contacts view. 
	
	* calendar/e-cal-backend-exchange.c (remove_calendar): ditto
	Temporary fix for #57129.

2004-08-05  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* calendar/e-cal-backend-exchange.c (discard_alarm): Implemented
	Fixes #45103

2004-08-04  Dan Winship  <danw@novell.com>

	* README: remove "this is SOOOO beta" message since we've been
	shipping snaps for quite a while now

2004-08-04  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (book_resource): 
	Implemented the code to book the calendar of a resource object.
	(send_objects): Added code to send mails to all attendees.

2004-08-03  Sushma Rai <rsushma@novell.com>

	* storage/exchange-hierarchy-foreign.c (remove_folder): Emitting the 
	"removed_folder" signal after ESource cleanup. Fixes a crash while
	unsubscribing other user's folder.

2004-08-03  Nicel KM  <mnicel@novell.com>

	* configure.in: 1.5.92

	* NEWS: update

2004-08-02  Adam Weinberger  <adamw@FreeBSD.org>

	* configure.in: Added en_CA to ALL_LINGUAS.

2004-08-02  Sushma Rai <rsushma@novell.com>

	* storage/exchange-hierarchy-somedav.[ch] 
	(exchange_hierarchy_somedav_add_folder): Removed the third
	parameter folder_out, which was always set to NULL and 
	hence this function was throwing the error "generic error".
	* storage/exchange-hierarchy-favorites.c 
	(exchange_hierarchy_favorites_add_folder): Likewise
	Fixes #62257

2004-07-30  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* storage/exchange-hierarchy-foreign.c 
	(exchange_hierarchy_foreign_add_folder): Remove unused variables.

2004-07-30  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-hierarchy-foreign.c (add_href): Allocate memory
	for uri before storing it in the hrefs array. Fixes #61950
	(exchange_hierarchy_foreign_add_folder): Now uses a cleaner way to
	get the foreign user's name.
	(hierarchy_foreign_new): Removed unwanted checks for input args.
	(exchange_hierarchy_foreign_new): Add checks for input args.
	(exchange_hierarchy_foreign_new_from_dir): Similar
	* storage/exchange-hierarchy-gal.c (exchange_hierarchy_gal_new):
	Add checks for input args.
	* storage/exchange-hierarchy-somedav.c (scan_subtree): Cleaned up
	code to use a local variable in the while loop.
	(exchange_hierarchy_somedav_add_folder): Input args checks
	* storage/exchange-hierarchy-webdav.c 
	(exchange_hierarchy_webdav_offline_scan_subtree)
	(exchange_hierarchy_webdav_construct)(exchange_hierarchy_webdav_new):
	Input args checks.
	* storage/exchange-hierarchy.c (exchange_hierarchy_new_folder): Similar
	(exchange_hierarchy_removed_folder)(exchange_hierarchy_create_folder)
	(exchange_hierarchy_remove_folder)(exchange_hierarchy_xfer_folder)
	(exchange_hierarchy_construct): Similar

2004-07-27  Dan Winship  <danw@novell.com>

	* mail/mail-stub-exchange.c (account_new_folder): if the new
	folder is the "ignore_new_folder" folder, ignore it.
	(account_removed_folder): if the removed folder is the
	"ignore_removed_folder" folder, ignore it.
	(create_folder): Don't return a FOLDER_CREATED response; the
	signal handler attached to the ExchangeAccount will do that.
	(delete_folder): Likewise for FOLDER_DELETED.
	(rename_folder): Don't return FOLDER_RENAMED (since
	camel_store_rename_folder does it automatically), and set
	ignore_new_folder and ignore_removed_folder so we don't emit
	deleted/created signals too. #58802

2004-07-26  Dan Winship  <danw@novell.com>

	* calendar/e-cal-backend-exchange.c (d): Turn off debug macro
	* calendar/e-cal-backend-exchange-calendar.c (d): Likewise
	* calendar/e-cal-backend-exchange-tasks.c (d): Likewise

2004-07-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-hierarchy-foreign.c 
	(exchange_hierarchy_foreign_add_folder)(remove_folder): Added code to
	create and remove esources for the other user's subscribed folders.
	This fixes #60964

2004-07-24  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* configure.in: Added "es" to ALL_LINGUAS

2004-07-23  Dan Winship  <danw@novell.com>

	* camel/camel-exchange-folder.c (init): Fix
	folder->permanent_flags definition
	(camel_exchange_folder_update_message_flags): Fix the list of
	flags to not unset because they aren't set on the server to
	include "JUNK" (since it's never set on the server).
	(camel_exchange_folder_construct): Don't pass the non-server flags
	to the server, or it will think they've changed and waste time
	telling us so.

2004-07-23  Åsmund Skjæveland  <aasmunds@fys.uio.no>

	* configure.in: Added "nn" to ALL_LINGUAS.
	* po/nn.po: Started Norwegian Nynorsk translation.

2004-07-22  Dan Winship  <danw@novell.com>

	* storage/ximian-connector.xml: Remove the quota command, since it
	wasn't implemented.

2004-07-19  Dan Winship  <danw@novell.com>

	* configure.in: 1.5.91

	* NEWS: Update

2004-07-16  Dan Winship  <danw@novell.com>

	* lib/e2k-kerberos.c (krb5_result_to_e2k_kerberos_result):
	"KRB5KDC_ERR_KEY_EXPIRED" is apparently a heimdal-only-ism. Use
	"KRB5KDC_ERR_KEY_EXP" instead.
	(e2k_kerberos_change_password): Likewise, use
	krb5_free_data_contents instead of krb5_data_free.

2004-07-15  Dan Winship  <danw@novell.com>

	* lib/e2k-kerberos.c: Lots of changes: properly namespace the
	functions (now "e2k_kerberos_check_password" and
	"e2k_kerberos_change_password"), remove the code that dealt with
	the local krb5.conf file (libkrb5 can autodetect the servers given
	the realm name), return status code enums rather than arbitrary
	krb5 error codes, and plug a few memory leaks.

	* lib/e2k-global-catalog.c (ntlm_bind): Fill in gc->domain with
	the name of the Windows 2000 domain.

	* lib/test-utils.c (test_ask_password): Split this (the
	password-asking routine) out of test_get_password so it can be
	used by cptest

	* lib/cptest.c: Update for e2k-kerberos changes, don't hard-code
	domain, and ask for the new password rather than taking it on the
	command line.

	* storage/exchange-account.c: Keep a copy of the e-passwords key
	around, rather than recomputing it in 5 different places.
	(is_password_expired): Update for e2k-kerberos changes
	(exchange_account_set_password): Update for e2k-kerberos changes.
	Pop up an error dialog if changing the password fails.
	(exchange_account_connect): When handling a forced password
	change, let the user "Cancel" if he wants.

	* storage/exchange-change-password.glade: HIGify a bit

	* storage/exchange-change-password.c (exchange_get_new_password):
	Clarify this by doing all the handling here rather than in signal
	handlers on the buttons.

	* storage/xc-commands.c (do_change_password): Plug leaks

2004-07-14  Dan Winship  <danw@novell.com>

	* lib/e2k-xml-utils.c (e2k_parse_html): Fix the #ifdef for old
	libxmls to avoid both new calls, not just one of them.

2004-07-09  Dan Winship  <danw@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (set_freebusy_info):
	Set the start/end of the spans correctly so the freebusy component
	doesn't end up effectively empty
	(get_free_busy): Fix the email address in the ORGANIZER props.
	#61045

2004-07-07  Alfred Peng <alfred.peng@sun.com>

	Fix for bugzilla BUG #59196.

	* storage/GNOME_Evolution_Exchange_Storage.server.in.in:
	Replace "Unknown" with "Exchange" in View->Window submenu.

2004-07-05  Nicel KM  <mnicel@novell.com>

	* configure.in : Bump version to 1.5.90

	* po/*.po: latest .po files

2004-07-03  Nicel KM  <mnicel@novell.com>

	* storage/exchange-account.c (get_password): In case of remembering
	password, no need to save the complete account_list. Fixes an 
	evolution crash that happens on adding the exchange account with 
	remember password option checked. 

2004-07-03  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (modify_object):
	Killed some type mismatch warnings.

2004-06-29  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Finding the
	folder type before removing the folder and also removing e-sources
	during rename/move only in case of success.
	Fixes #60685

2004-06-28  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (remove_object):
	Handle deletions of individual occurences of a recurring event.
	In case of deleting single occurance, remove the instance from 
	the component and modify_object.

2004-06-23  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (create_object):
	Update the categories list with the ref for the new component.
	Removed some commented code.
	(modify_object): remove the old and add new category in the category 
	list
	(remove_object): remove ref for component from the category list


2004-06-22  Dan Winship  <danw@novell.com>

	* lib/e2k-uri.c (e2k_uri_append_encoded, e2k_uri_encode): add a
	"wss_encode" flag, saying whether or not to use the Web Storage
	System URI-encoding rules ("/" becomes "_xF8FF_", etc), since some
	places don't want them.

	* lib/e2k-context.c (e2k_context_fba): Don't put multiple &s
	between flags, and use "normal" URI encoding rules without the
	extra goofy WSS rules. Fixes FBA to E2k3 SP1.
	(e2k_context_put_new, e2k_context_proppatch_new): Set wss_encode
	flag to e2k_uri_encode

	* lib/e2k-global-catalog.c (e2k_global_catalog_lookup): Translate
	LDAP_INVALID_CREDENTIALS to E2K_GLOBAL_CATALOG_AUTH_FAILED.

	* lib/e2k-autoconfig.c (reset_owa_derived): Only reset the NT
	domain if it was autodetected
	(e2k_autoconfig_set_username): If setting the NT domain, note that
	it wasn't autodetected.
	(get_ctx_auth_handler): If the NT domain isn't set, set it, and
	note that it *was* autodetected. #60548
	(e2k_autoconfig_check_global_catalog): If using plaintext LDAP
	auth, handle an E2K_GLOBAL_CATALOG_AUTH_FAILED by returning
	E2K_AUTOCONFIG_AUTH_ERROR_TRY_DOMAIN.
	(set_account_uri_string): Update for e2k_uri_append_encoded
	changes

	* lib/actest.c (test_main): handle
	E2K_AUTOCONFIG_AUTH_ERROR_TRY_DOMAIN from
	e2k_autoconfig_check_global_catalog().

	* lib/e2k-freebusy.c (fb_uri_for_dn): Set wss_encode flag to
	e2k_uri_append_encoded

	* lib/gctest.c (do_lookup): add a message for
	E2K_GLOBAL_CATALOG_AUTH_FAILED.

	* storage/exchange-autoconfig-wizard.c (gc_page_next): Likewise

	* storage/exchange-account.c (exchange_account_new): Update for
	e2k_uri_encode change

	* storage/exchange-oof.c (exchange_oof_set): Likewise

2004-06-22  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Removing 
	ESources in both successful and failure cases of renaming 
	folder.
	Fix for #60531
 
2004-06-22  Sarfraaz Ahmed <asarfraaz@novell.com>

	Fix for #60327
	* calendar/e-cal-backend-exchange.c
	(e_cal_backend_exchange_extract_components): Added new. This creates 
	a list of objects [VEVENTS/VTODO] from a calendar object.
	(receive_objects): Removed. This is now done separately in calendar
	and tasks code.
	(e_cal_backend_exchange_receive_objects): Removed. This is not being
	used anywhere
	* calendar/e-cal-backend-exchange.h : Likewise
	* calendar/e-cal-backend-exchange-calendar.c (receive_objects): This
	now makes use of the extract_component method.
	* calendar/e-cal-backend-exchange-tasks.c (receive_task_objects):
	Implemented

2004-06-21  Dan Winship  <danw@novell.com>

	* addressbook/e-book-backend-exchange.c (e_contact_from_props): if
	the contact has an attachment, load the message body and see if
	the attachment is a contact picture, and set the E_CONTACT_PHOTO
	property if so. #57801.
	(do_put): if the contact has a photo, put that too. Except that
	this code doesn't work right yet. (Outlook doesn't recognize the
	photo like it should.) So for now, I'm leaving E_CONTACT_PHOTO out
	of supported_fields, so the editor won't let you edit it.
	(e_book_backend_exchange_create_contact): call do_put if there's
	either a note or a photo.
	(e_book_backend_exchange_modify_contact): Make this actually call
	do_put rather than just having a FIXME. 

	* configure.in (ADDRESSBOOK_CFLAGS, EXCHANGE_STORAGE_LIBS): add
	camel

	* storage/main.c (main): Call camel_init()

2004-06-19  Sarfraaz Ahmed <asarfraaz@novell.com>

	Fix for #57868
	* calendar/e-cal-backend-exchange.c (e_cal_backend_exchange_in_cache):
	Modified to now take in the href and update it in the cache
	* calendar/e-cal-backend-exchange.h : Likewise
	* calendar/e-cal-backend-exchange-calendar.c (get_changed_events):
	Pass the href to the new e_cal_backend_exchange_in_cache method.
	* calendar/e-cal-backend-exchange-tasks.c (get_changed_tasks)
	(create_task_object): Likewise

2004-06-18  Sarfraaz Ahmed <asarfraaz@novell.com>

	* addressbook/e-book-backend-exchange.c : Modified the backend 
	members to now accept "opid".
	* addressbook/e-book-backend-gal.c : Similar

2004-06-18  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c (proppatch_date): Freeing
	the date entered only after forming the time stamp.
	Fixes #60342
 
2004-06-17  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_get_static_capabilites): Added the 
	static capability "no-contactlist-option" to disable the menu
	option to create contact lists for the exchange account.
	FIX for #57130 

2004-06-16  Dan Winship  <danw@novell.com>

	* camel/camel-exchange-provider.c (exchange_conf_entries): Add
	junk flags

	* storage/exchange-account.c (exchange_account_new): Record the
	"filter_junk" and "filter_junk_inbox" flag values.

	* mail/mail-stub-exchange.c (get_folder): Set the "filter junk"
	flag on the folder if appropriate

	* camel/camel-exchange-store.c (construct): If "filter_junk" is
	enabled, set the VJUNK flag on the store.

	* camel/camel-exchange-folder.c (camel_exchange_folder_construct):
	If the backend set the "filter junk" flag, set that on the folder.

2004-06-16  Dan Winship  <danw@novell.com>

	* addressbook/e-book-backend-gal.c (query_prop_to_ldap): If the
	prop is "email", translate it to "email_1" so it matches
	correctly.
	(get_contact_list): If build_query returns a NULL query, just
	return success immediately (with no matches) rather than searching
	the entire GC.

	(ldap_search_dtor): we don't need to lock/unlock the view's mutex
	anymore. [copied from e-book-backend-ldap.c]

	(ldap_search_handler): remove the ref/unref of the book view here.
        (e_book_backend_ldap_search): move the ref of the book view
	here.
        (ldap_search_dtor): and the unref to here. [copied from
	e-book-backend-ldap.c]

2004-06-16  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-autoconfig-wizard.glade: Made the activate_defaults
	for the GtkEntries to be TRUE so that the sensitized Forward button
	gets pressed when the user presses Enter key while the focus is in the
	GtkEntry. This fixes #58201

2004-06-14  Dan Winship  <danw@novell.com>

	* shell/e-storage-set-view.c (etree_value_at): Remove unused
	variable

2004-06-14  Sushma Rai  <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_remove_contacts): Handling bulk removal of
	contacts.

	* addressbook/e-book-backend-exchange.c :
	(e_book_backend_exchange_get_static_capabilites): Added "bulk-removes"
	to the static capabilities.
	Fixes #59927

2004-06-12  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-component.c (impl_upgradeFromVersion): Made as
	void function.

	* storage/exchange-migrate.[ch] (exchange_migrate): ditto
 
2004-06-12  Sushma Rai  <rsushma@novell.com>

	* storage/migr-test.c (main): Removed hard coded values, and
	changes to usage and error messages.

2004-06-12  David Malcolm  <dmalcolm@redhat.com>

	* storage/migr-test.c (main): Fixed command-line arg parsing
	of major, minor and revision

2004-06-10  Dan Winship  <danw@novell.com>

	* shell/e-storage-set-view.c (etree_value_at): Remove support for
	unread count

	* storage/exchange-account.c (exchange_account_update_folder):
	Remove this (and the associated signal).

	* storage/exchange-hierarchy.c
	(exchange_hierarchy_updated_folder): Likewise

	* storage/exchange-hierarchy-webdav.c (rescan): Remove call to
	exchange_hierarchy_updated_folder.

	* mail/mail-stub-exchange.c (folder_changed): Just set the
	folder's unread count. Don't worry about telling the
	ExchangeAccount.

2004-06-10  Dan Winship  <danw@novell.com>

	* camel/camel-exchange-transport.c (exchange_send_to): Fix
	camel_session_get_password() args

	* calendar/e-cal-backend-exchange.c (match_recurrence_sexp):
	Unused, remove.

	* calendar/e-cal-backend-exchange-tasks.c: Remove a bunch of
	unused functions

	* shell/e-storage-set-view.c (pixbuf_free_func): Unused, remove

2004-06-10  Dan Winship  <danw@novell.com>

	* storage/exchange-config-listener.c (add_defaults_for_account,
	remove_defaults_for_account): Remove a lot of dead code

	* storage/apps_evolution_exchange.schemas: No longer relevant

	* storage/Makefile.am: remove gconf schema bits

2004-06-07  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-favorites.c (remove_folder):
	Removing ESources with favorite folder deletion.
	This would be removed with code reorganization (#59168).

2004-06-04  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (remove_esource):
	Checking for absolute URI only for contact folders.
	Fixes #59547

2004-06-04  Duarte Loreto <happyguy_pt@hotmail.com>

	* configure.in: Added Portuguese (pt) to ALL_LINGUAS.

2004-06-03  Dan Winship  <danw@novell.com>

	* storage/xc-backend-view.c (xc_backend_view_new): Put the
	treeview into a scrolled window, so it doesn't go all wacky if
	it's empty. #59009

	* storage/exchange-account.c (exchange_account_connect): Redo this
	a bit; use a "connecting" flag rather than holding the lock the
	whole time. This probably breaks other things, but it prevents a
	deadlock when the exchnage component and the mail component both
	try to connect at the same time.

2004-06-03  Dan Winship  <danw@novell.com>

	* configure.in: Bump version to 1.5.9

	* acinclude.m4 (EVO_LDAP_CHECK): Fix this so it works with
	non-Ximian OpenLDAP packages. (Problem noted by Frederic Crozat)

2004-06-03  Dan Winship  <danw@novell.com>

	* component/*: Gone. Now that we're not using the other
	components' controls to display things, there is no need for the
	shlib proxy. (We still can't move everything into the shlib,
	because then there would be multiple active copies of the exchange
	backend in some cases, and the code is not currently set up to
	deal with that possibility.)
	
	* Makefile.am (SUBDIRS): Remove component

	* configure.in (AC_OUTPUT): Likewise

	* addressbook/Makefile.am (INCLUDES): Remove -I../component

	* addressbook/e-book-backend-exchange.c
	(e_book_backend_exchange_connect): s/xc_backend/exchange_component/

	* addressbook/e-book-backend-gal.c (gal_connect): Likewise

	* calendar/Makefile.am (INCLUDES): Remove -I../component

	* calendar/e-cal-backend-exchange.c (open_calendar):
	s/xc_backend/exchange_component/

	* storage/Makefile.am (INCLUDES): Remove -I../component
	(evolution_exchange_storage_SOURCES): Remove xc-backend.[ch], add
	exchange-component.c (moved here from component/, and merged with
	the former xc-backend.c).

	* storage/GNOME_Evolution_Exchange_Storage.server.in.in: Merge in
	the component factory stuff formerly in
	component/GNOME_Evolution_Exchange_Component.server.in.in

	* storage/exchange-account.c (get_password,
	exchange_account_connect): s/xc_backend/exchange_component/

	* storage/main.c (setup_component_factory): Sets up a bonobo
	factory for the shell component
	(main): Call it.

	* storage/xc-commands.c (xc_folder_get_account):
	s/xc_backend/exchange_component/

	* storage/connector-mini.png: Replace this 16x16 icon with a 24x24
	one since that's what the shell sidebar needs

2004-06-02  Gareth Owen  <gowen72@yahoo.com>

	* configure.in: Added en_GB to ALL_LINGUAS

2004-06-02  Dan Winship  <danw@novell.com>

	* storage/exchange-account.c (exchange_account_connect): Record
	the favorites hierarchy in a private variable
	(exchange_account_add_favorite, exchange_account_remove_favorite):
	Add. They just proxy to the favorites hierarchy

	* storage/exchange-hierarchy-favorites.c
	(exchange_hierarchy_favorites_add_folder): Implement this
	(remove_folder): And this

	* storage/xc-commands.c (do_add_favorite, do_remove_favorite):
	Implement these

	* lib/e2k-utils.c (e2k_entryid_to_permanenturl): Fix this up a
	little.
	(e2k_permanenturl_to_entryid): Add this, its inverse. Only tested
	on folder urls.

2004-06-01  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add Norwegian to ALL_LINGUAS.

2004-06-01  Sushma Rai	<rsushma@novell.com>

	Fixes #59385, #59387 
	* storage/e-folder-exchange.c (e_folder_exchange_new)
	(e_folder_exchange_delete): Adding ESources only for personal and 
	favorite folders. 

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Removing ESources
	during folder rename/move for personal and favorite folders.

	* storage/exchange-account.c (exchange_account_connect): Scan for
	favorites folders to resolve references before expanding the tree.

2004-05-28  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2004-05-28  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (receive_objects):
	Fix receive_objects to handle cancelled meeting requests.

2004-05-28  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.[ch](add_esource)(remove_esource)
	(add_sources)(remove_sources): Creating the ESource with absolute URI
	for Contacts and GAL folder, So that GAL can be displayed in and 
	accessed from Contacts view though it has been registered as a 
	seperate protocol. Also creating and removing ESources for favorite 
	folders while account creation and deletion respectively.

	* storage/e-folder-exchange.c (e_folder_exchange_new)
	(e_folder_exchange_delete): Identify folder type while adding and removing
	folders. 

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Removing ESources 
	while renaming or moving a folder.

	* storage/exchange-hierarchy-gal.c (exchange_hierarchy_gal_new):
	Create ESource for GAL folder. 

2004-05-25  Dan Winship  <danw@novell.com>

	* camel/camel-exchange-store.c (get_trash): Update to match the
	camel changes for #57114. (Call camel_store_get_folder() rather
	than using the virtual method directly.)

2004-05-26  Rodney Dawes  <dobey@novell.com>

	* configure.in (BASE_VERSION): Revert to previous change as using
	AC_PACKAGE_VERSION here doesn't actually work with autotools *grmbls*

2004-05-26  Rodney Dawes  <dobey@novell.com>

	* configure.in (BASE_VERSION): Use $AC_PACKAGE_VERSION instead of
	$VERSION, so that intltool-update may substitute it properly

2004-05-26  Sarfraaz Ahmed <asarfraaz@novell.com>

	* storage/exchange-account.c (exchange_account_forget_password): 
	Implemented.
	(exchange_account_set_password): remember password only if save_passwd
	is TRUE.
	* storage/exchange-account.h: Likewise
	* storage/exchange-config-listener.c (account_removed): forget the 
	stored passwords.
	* storage/xc-backend.c (idle_do_interactive): Call oof only if xid is
	present.

2004-05-26  Sushma Rai <rsushma@novell.com>

	* addressbook/e-book-backend-exchange.c 
	(e_book_backend_exchange_get_supported_fields): Using 
	e_contact_field_name()

2004-05-26  Not Zed  <NotZed@Ximian.com>

	* camel/camel-exchange-store.c (make_folder_info): fixed for camel
	api change, removed path.

2004-05-25  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange.c (get_object_list):
	put get_object_list in. recurrence part to be looked at

2004-05-24  Sarfraaz Ahmed  <asarfraaz@novell.com>

	Fixes #58754

	* calendar/e-cal-backend-exchange-tasks.c (create_task_object): Set 
	summary to empty string when it is NULL.

2004-05-21  Dan Winship  <danw@novell.com>

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Return a
	better error when failing to rename a stock folder. #57387.

	* mail/mail-stub-exchange.c (rename_folder): Send the URI from the
	newly-renamed folder, not the no-longer-existent old folder

	* camel/camel-exchange-folder.c (camel_exchange_folder_construct):
	* camel/camel-exchange-store.c (exchange_get_folder): 
	* mail/mail-stub.c (connection_handler):
	* mail/mail-stub-exchange.c (get_folder): Handle the "create
	folder" option to camel_store_get_folder, to fix #57688

2004-05-21  Dan Winship  <danw@novell.com>

	* shell/Makefile.am (libfoldertree_a_SOURCES): Remove
	e-icon-factory; we'll use the one in e-util now

	* shell/e-icon-factory.c: Gone

	* shell/e-folder-type-registry.c
	(e_folder_type_registry_get_icon_for_type, etc): Remove. The
	registry will keep icon names, but the actual pixbufs will come
	from EIconFactory.

	* shell/e-folder-creation-dialog.c (add_folder_types): Use
	EIconFactory to get the actual pixbuf rather than expecting the
	folder type registry to have it.

	* shell/e-storage-set-view.c (get_pixbuf_for_folder): Always use
	EIconFactory, not just for custom icons.

	* storage/main.c (main): e_icon_factory_init ().

	* storage/exchange-hierarchy-webdav.c
	(exchange_hierarchy_webdav_new,
	exchange_hierarchy_webdav_construct): Remove custom_icon arg.
	Always use "stock_folder".
	(exchange_hierarchy_webdav_parse_folder): Use "stock_delete" for
	the trash icon.

	* storage/exchange-hierarchy-foreign.c (hierarchy_foreign_new):
	Remove custom_icon arg to exchange_hierarchy_webdav_construct

	* storage/exchange-account.c (exchange_account_connect): Remove
	the custom_icon arg to exchange_hierarchy_webdav_new.

	* storage/xc-backend.c (setup_folder_type_registry): Change icon
	info to use stock icons. Remove unused DnD stuff.

	* storage/xc-backend-view.c (xc_backend_view_new): Create an
	EUserCreatableItemsHandler too.
	(activated): activate it.

2004-05-21  Sarfraaz Ahmed <asarfraaz@novell.com>
	
	* camel/camel-exchange-transport.c (exchange_send_to): Incorporated
	get_password changes from evolution/camel

2004-05-20  Dan Winship  <danw@novell.com>

	* storage/xc-backend-view.c: Lots of changes. Now we show a list
	of accounts in the sidebar and the folder tree in the main view.

	* storage/xc-backend.c (impl_createControls, etc): Update for
	that.

	* storage/xc-commands.c (do_oof, do_delegates,
	do_change_password): Operate on the selected account.

	* storage/exchange-config-listener.c
	(exchange_config_listener_get_accounts): Returns a GSList of
	accounts. (Of course, currently there would be 0 or 1 members.)

2004-05-20  Sarfraaz Ahmed <asarfraaz@novell.com>

	* calendar/e-cal-backend-exchange-tasks.c (add_timezone_cb) Removed.
	This was not being used anywhere.
	* lib/e2k-global-catalog.c : Some initializations for avoiding
	warnings
	* shell/e-folder-misc-dialogs.c : Similar
	* storage/exchange-hierarchy-favorites.c : Similar

2004-05-20  Nicel KM  <mnicel@novell.com>

	* calendar/e-cal-backend-exchange-calendar.c (receive_objects): 
	Implement. Use the create_object and modify_object methods

2004-05-19  Dan Winship  <danw@novell.com>

	* storage/exchange-hierarchy-favorites.c: Actually, we weren't
	using that include anyway... not sure what it was doing there.

2004-05-19  Larry Ewing  <lewing@ximian.com>

	* storage/exchange-hierarchy-favorites.c: e-xml-hash-utils.h lives
	in libedataserver now.

2004-05-18  Dan Winship  <danw@novell.com>

	* mail/mail-stub.c (d): Turn off debug spew

2004-05-17  Rodney Dawes  <dobey@ximian.com>

	* storage/Makefile.am (EXTRA_DIST): Remove mail.xpm

2004-05-17  Dan Winship  <danw@novell.com>

	* lib/e2k-result.c (sanitize_bad_multistatus): New routine, used
	by e2k_results_array_add_from_multistatus to fix broken Exchange
	XML so recent versions of libxml2 will parse it correctly.
	(#58528)
	(prop_parse): Invert the transformation here so the rest of
	connector still sees the invalid-but-canonical names.

	* lib/e2k-propnames.h.in: add E2K_NS_MAPI_ID_LEN, the length of
	E2K_NS_MAPI_ID.

2004-05-17  Dan Winship  <danw@novell.com>

	Remove a bunch of 1.4 files that should have been deleted by the
	1.5 import, except that CVS is lame.
	
	* addressbook/pas-backend-ad.[ch]
	* addressbook/pas-backend-exchange.[ch]: Gone

	* calendar/cal-backend-exchange.[ch]
	* calendar/cal-backend-exchange-utils.c
	* calendar/e2k-cache.[ch]
	* calendar/e2k-cal-component.[ch]
	* calendar/e2k-cal-component-todo.c: Gone
	
	* storage/exchange-delegates-control.c: 
	* storage/exchange-delegates-delegates.c: 
	* storage/exchange-delegates-delegators.c:
	* storage/mail.xpm: Gone

	* storage/Makefile.am (evolution_exchange_storage_SOURCES): Sort

2004-05-14  Dan Winship  <danw@novell.com>

	* component/exchange-component.c: Remove backend/backend_component
	split.
	(impl_createControls): Now just calls the backend createControls

	* component/Ximian-Connector.idl: Gone. We can just use
	GNOME::Evolution::Component now.

	* component/Makefile.am: remove IDL stuff

	* storage/xc-backend.c: Merge xc-backend-component.c into this.
	This now implements GNOME::Evolution::Component directly rather
	than Ximian::Connector::Backend
	(impl_createControls): Merge the old createSidebar with the old
	exchange-component.c:impl_createControls.

	* storage/exchange-migrate.c:
	* storage/xc-backend-view.c: Remove some unnecessary #includes of
	things that are no longer there

	* storage/xc-backend-component.[ch]: Gone (merged into xc-backend)

	* storage/Makefile.am: remove IDL stuff, xc-backend-component.[ch]

2004-05-14  Sarfraaz Ahmed <asarfraaz@novell.com>

	Fixes the change password bug#58419

	* storage/exchange-account.c (get_password): Added the code to
        create the kerberos config file, if its not yet created.
        (exchange_account_get_password): Retrives the password stored
        locally.
        (exchange_account_set_password): Updates the server with the new
        password and also updates it locally.
        (exchange_account_connect): Updated the code to use the new
        exchange_get_new_password call.
        * storage/exchange-account.h: Function declarations for
        exchange_account_get_password and exchange_account_set_password
        * storage/exchange-change-password.c (check_pass_cb): Removed the
        e2k_autoconfig calls.
        (exchange_get_new_password): This now returns the new password.
        * storage/exchange-change-password.h: password_data struct now
        contains the new_password.
        * storage/xc-commands.c (do_change_password): This now makes use
        of the new exchange_account_get/set_password and calls
        exchange_get_new_password.

2004-05-14  Sushma Rai  <rsushma@novell.com>
	
	Prevents a crash when the account doesn't have any favorite folders 
	and tried to access favorite folders.

	* storage/exchange-hierarchy-somedav.c (scan_subtree): Initialized
	folders_returned and folders_added to zero.
	
	* lib/e2k-result.c (e2k_result_iter_free): Initializing status
	after checking if iter is NULL.
 
2004-05-13  Dan Winship  <danw@novell.com>

	* storage/exchange-hierarchy.h (ExchangeHierarchyType): Add values
	for FAVORITES and GAL, and sort the values in the same order we
	want the hierarchies to show up in the tree.

	* storage/exchange-hierarchy.c (add_to_storage): Set the toplevel
	folder's sorting_priority based on its type.

	* storage/exchange-hierarchy-webdav.c
	(exchange_hierarchy_webdav_construct,
	exchange_hierarchy_webdav_new): Remove the sorting_priority arg
	and the call to e_folder_set_sorting_priority. ExchangeHierarchy
	will handle this now.

	* storage/exchange-hierarchy-gal.c (exchange_hierarchy_gal_new):
	Use EXCHANGE_HIERARCHY_GAL as the type now

	* storage/exchange-hierarchy-foreign.c (hierarchy_foreign_new):
	update for exchange_hierarchy_webdav_new() change

	* storage/exchange-hierarchy-favorites.c
	(exchange_hierarchy_favorites_new): use
	EXCHANGE_HIERARCHY_FAVORITES as the type now, and don't pass a
	sort order.

	* storage/exchange-account.c (exchange_account_connect): update
	for exchange_hierarchy_webdav_new() change

	* storage/xc-commands.c (do_view_folder): Gone now.
	(do_remove_favorite): Add (FIXMEd)
	(xc_commands_context_menu): Simplify a little for the new
	EXCHANGE_HIERARCHY_ values, add "remove from favorites", and
	generally fix up a little.

2004-05-13  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-hierarchy-webdav.c (xfer_folder): Removing
	ESources for the folder which is renamed.

2004-05-13  Sushma Rai  <rsushma@novell.com>

	* storage/e-folder-exchange.c (e_folder_exchange_new): Adding
	ESources if the folder created is of the type personal calendar,
	tasks or contacts.
	(e_folder_exchange_delete): Deleting the ESource for the folder
	that is removed, if it is of the type, personal calendat. tasks
	or contacts.

	* storage/exchange-config-listener.c (add_esource): Made non-static
	(remove_esource) : Removing the source group in case of 
	account deletion and removing only the source for the perticular
	folder from the source group in case of folder deletion.
	Made non-static

	* storage/exchange-config-listener.h: Declarations for add_esource()
	and remove_esource()

	Fixes #57126, #57129 

2004-05-12  Dan Winship  <danw@novell.com>

	* storage/exchange-hierarchy-somedav.c: Split this out from
	exchange-hierarchy-foreign; new abstract class for hierarchies
	that are a subset of webdav folders from somewhere else.

	* storage/exchange-hierarchy-foreign.c: Now a subclass of
	ExchangeHierarchySomeDAV.

	* storage/exchange-hierarchy-favorites.c: New subclass of
	ExchangeHierarchySomeDAV for displaying "favorite" Public Folders.
	(Currently displays simple Outlook favorites correctly, but
	doesn't handle more complex cases, and no way to edit things.)

	* storage/exchange-account.c (exchange_account_connect): Create a
	favorites hierarchy.

	* lib/e2k-utils.c (e2k_entryid_to_permanenturl): New (to create a
	WebDAV permanent URL from a favorites entry)

2004-05-12  Dan Winship  <danw@ximian.com>

	* storage/exchange-change-password.glade: add this file, missing
	from the original import

	* storage/Makefile.am (glade_DATA): add
	exchange-change-password.glade

2004-05-12  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (add_sources)(remove_sources):
	Calling e_source_list_sync() after forming the sources for all the 
	folders for each component, instead of calling it for each folder 
	in a loop.
	Fixes bug #58320
 
2004-05-12  Sushma Rai  <rsushma@novell.com>

	* storage/exchange-config-listener.c (add_esource)(remove_esource):
	Fixed problem with forming the relative uri for the subfolders.
	(add_sources)(remove_sources): Finding physical uri of the folder.

2004-05-12  Sushma Rai  <rsushma@novell.com>

	* component/exchange-component.c (impl_upgradeFromVersion):
	Changed the return type to void.

2004-05-11  Dan Winship  <danw@ximian.com>

	* Ximian Connector 1.5.7, first GPL release.

	* README: Note that this is for evo head, and that it doesn't
	really work, and that you probably want connector-1-4-branch
